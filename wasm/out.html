<!doctype html>

<html>
    <head>
        <meta charset="utf-8">
        <title>Simple wasm example</title>
    </head>
    <body>
        <script>
         function fetchAndRun(url, importObject) {
             return fetch(url).then(response =>
                 response.arrayBuffer()
             ).then(bytes =>
                 WebAssembly.instantiate(bytes, importObject)
             ).then(results =>
                 results.instance
             );
         }
         var importObject = {
             console: {
                 log: console.log
             }
         }
         fetchAndRun('out.wasm', importObject).then(function(instance) {
           var res = instance.exports.main()
             console.log(res);
             document.getElementById("res").innerHTML=res
         });
        </script>
        <p> Returned: </p>
        <p id=res> PENDING </p>
    </body>

</html>
